"use strict";(self.webpackChunkeliftech_app=self.webpackChunkeliftech_app||[]).push([[708],{8332:function(e,r,t){t.d(r,{AU:function(){return c},Ju:function(){return u},fS:function(){return l}});var o=t(4165),n=t(5861),a=t(5082),s=t(4569),i=t.n(s),l=function(e){return function(){var r=(0,n.Z)((0,o.Z)().mark((function r(t){var n,s;return(0,o.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t((0,a.Km)()),r.prev=1,r.next=4,i().patch("/orders",e);case 4:n=r.sent,s=n.data,t((0,a.MS)(s.order)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),t((0,a.WV)(r.t0.response.data.message));case 12:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()},c=function(e){var r=e.orderEmail,t=void 0===r?"":r,s=e.orderPhone,l=void 0===s?"":s;return function(){var e=(0,n.Z)((0,o.Z)().mark((function e(r){var n,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r((0,a.a_)()),e.prev=1,e.next=4,i().get("/orders?page=1&limit=10&email=".concat(t,"&phone=").concat(l));case 4:n=e.sent,s=n.data,r((0,a.Ow)(s.orders)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r((0,a.W1)(e.t0.response.data.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(r){return e.apply(this,arguments)}}()},u=function(e){return function(){var r=(0,n.Z)((0,o.Z)().mark((function r(t){var n,s;return(0,o.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t((0,a.mJ)()),r.prev=1,r.next=4,i().get("/orders/".concat(e));case 4:n=r.sent,s=n.data,t((0,a.DJ)(s.order)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),t((0,a.OC)(r.t0.response.data.message));case 12:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()}},4668:function(e,r){var t={getOrdersError:function(e){return e.orders.ordersError},getOrdersLoading:function(e){return e.orders.ordersLoading},getOrders:function(e){return e.orders.orders},getAddedOrder:function(e){return e.orders.addedOrder},getAddOrderErrors:function(e){return e.orders.addOrderErrors},getAddOrderLoading:function(e){return e.orders.addOrderLoading},getName:function(e){return e.orders.name},getEmail:function(e){return e.orders.email},getPhone:function(e){return e.orders.phone},getAddresss:function(e){return e.orders.address}};r.Z=t},9160:function(e,r,t){t.r(r),t.d(r,{default:function(){return U}});var o=t(885),n=t(2144),a=t(5987),s=t(1413),i=t(1694),l=t.n(i),c=t(2791),u=t(6543),d=t(162),p=t(6882),g=c.createContext(null);g.displayName="InputGroupContext";var m=g,f=t(184),v=["bsPrefix","size","hasValidation","className","as"],h=(0,u.Z)("input-group-text",{Component:"span"}),x=c.forwardRef((function(e,r){var t=e.bsPrefix,o=e.size,n=e.hasValidation,i=e.className,u=e.as,p=void 0===u?"div":u,g=(0,a.Z)(e,v);t=(0,d.vE)(t,"input-group");var h=(0,c.useMemo)((function(){return{}}),[]);return(0,f.jsx)(m.Provider,{value:h,children:(0,f.jsx)(p,(0,s.Z)((0,s.Z)({ref:r},g),{},{className:l()(i,t,o&&"".concat(t,"-").concat(o),n&&"has-validation")}))})}));x.displayName="InputGroup";var _=Object.assign(x,{Text:h,Radio:function(e){return(0,f.jsx)(h,{children:(0,f.jsx)(p.Z,(0,s.Z)({type:"radio"},e))})},Checkbox:function(e){return(0,f.jsx)(h,{children:(0,f.jsx)(p.Z,(0,s.Z)({type:"checkbox"},e))})}}),j=t(241),b=t(3360),Z=t(1899),y=t(4668),C=t(2237),P=t(4659),I=t(682),S=t(8332),A=t(9764),E={CartGoodsList:"CartGoods_CartGoodsList__94UJt",CartGoodsList__Item:"CartGoods_CartGoodsList__Item__-KkdQ",Card:"CartGoods_Card__aIqJP",Card__Img:"CartGoods_Card__Img__hTFun",Card__Body:"CartGoods_Card__Body__KgCc1"};function L(){var e=(0,Z.I0)(),r=(0,c.useState)(0),t=(0,o.Z)(r,2),a=t[0],s=t[1],i=(0,Z.v9)(y.Z.getName),l=(0,Z.v9)(y.Z.getEmail),u=(0,Z.v9)(y.Z.getPhone),d=(0,Z.v9)(y.Z.getAddresss),p=(0,Z.v9)(C.Z.getCart),g=(0,Z.v9)(P.Z.getActualShop),m=function(r){var t=r.target,o=t.name,n=t.value,a=Number(n);e(0===a?(0,I.h2)({_id:o}):(0,I.xu)({_id:o,quantity:a}))};(0,c.useEffect)((function(){s(p.reduce((function(e,r){return e+r.quantity*r.good.price}),0).toFixed(2))}),[p]);return(0,f.jsxs)("div",{children:[(0,f.jsx)("ul",{className:E.CartGoodsList,children:p.map((function(e){return(0,f.jsx)("li",{className:E.CartGoodsList__Item,children:(0,f.jsxs)(n.Z,{className:E.Card,border:"primary",children:[(0,f.jsx)(n.Z.Img,{src:e.good.picture?e.good.picture:A,className:E.Card__Img}),(0,f.jsxs)(n.Z.Body,{className:E.Card__Body,children:[(0,f.jsx)(n.Z.Title,{className:E.Card__Title,children:e.good.name}),(0,f.jsxs)(n.Z.Text,{children:["Price: ",e.good.price]}),(0,f.jsx)(_,{children:(0,f.jsx)(j.Z.Control,{value:e.quantity,name:e.good._id,type:"number",onChange:m})})]})]})},e.good._id)}))}),(0,f.jsxs)("h3",{children:["Total price: ",a]}),(0,f.jsx)(b.Z,{className:E.button,onClick:function(r){r.preventDefault(),e((0,S.fS)({name:i,email:l,phone:u,address:d,shop:g,price:a,cart:p}))},type:"submit",children:"Submit"})]})}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},O.apply(this,arguments)}var w="https://maps.googleapis.com/maps/api/js",N=c.createContext({googleMapsAPIIsLoaded:!1}),k=function(e){var r=e.children,t=e.googleMapsAPIKey,n=e.mapContainer,a=e.mapOptions,s=e.libraries,i=e.language,l=e.region,u=e.version,d=e.authReferrerPolicy,p=e.onLoadScript,g=e.onLoadMap,m=(0,c.useState)(!0),f=(0,o.Z)(m,2),v=f[0],h=f[1],x=(0,c.useState)(),_=(0,o.Z)(x,2),j=_[0],b=_[1];return(0,c.useEffect)((function(){var e=function(){h(!1),p&&p()},r=navigator.language.slice(0,2),o=navigator.language.slice(3,5),n=new URLSearchParams(O({key:t,language:i||r,region:l||o},(null==s?void 0:s.length)&&{libraries:s.join(",")},u&&{v:u},d&&{auth_referrer_policy:d})),a=document.querySelector('script[src^="'.concat(w,'"]'));if(a){var c=new URL(a.src);c.searchParams.toString()!==n.toString()&&console.error("The Google Maps API Parameters passed to the `GoogleMapsProvider` components do not match. The Google Maps API can only be loaded once. Please make sure to pass the same API parameters to all of your `GoogleMapsProvider` components.","\n\nExpected parameters:",Object.fromEntries(c.searchParams),"\n\nReceived parameters:",Object.fromEntries(n))}if("object"===typeof google&&"object"===typeof google.maps)e();else if(a){h(!0);var g=a.onload;a.onload=function(r){null==g||g.call(a,r),e()}}else{h(!0),window.mapsCallback=function(){e()},n.set("callback","mapsCallback");var m=document.createElement("script");m.type="text/javascript",m.src="".concat(w,"?").concat(n.toString()),document.getElementsByTagName("head")[0].appendChild(m)}return function(){document.querySelectorAll('script[src^="https://maps.googleapis.com"]').forEach((function(e){e.remove()})),"object"===typeof google&&"object"===typeof google.maps&&delete google.maps}}),[t,JSON.stringify(s),i,l,u,d]),(0,c.useEffect)((function(){if(v||!n||"object"!==typeof google||"object"!==typeof google.maps)return function(){};var e=new google.maps.Map(n,a);return google.maps.event.addListenerOnce(e,"idle",(function(){g&&e&&g(e)})),b(e),function(){e&&"object"===typeof google&&"object"===typeof google.maps&&google.maps.event.clearInstanceListeners(e)}}),[v,n]),c.createElement(N.Provider,{value:{map:j,googleMapsAPIIsLoaded:!v}},r)},G=function(){return(0,c.useContext)(N).map},M=t(5082),T=function(e){var r=e.initialPosition,t=(0,Z.I0)(),n=G(),a=function(){var e=(0,c.useContext)(N).googleMapsAPIIsLoaded;return(0,c.useMemo)((function(){return e?new google.maps.Geocoder:null}),[e])}(),s=(0,c.useState)(null),i=(0,o.Z)(s,2),l=i[0],u=i[1],d=(0,c.useState)(null),p=(0,o.Z)(d,2),g=p[0],m=p[1];return(0,c.useEffect)((function(){if(!n)return function(){};var e=new google.maps.Marker({map:n,position:r});u(e);var t=new google.maps.InfoWindow({content:"Your calculated place is here. Click your exact address, please.",position:r});return m(t),t.open(n,e),function(){null===t||void 0===t||t.close(),null===e||void 0===e||e.setMap(null)}}),[n]),(0,c.useEffect)((function(){if(!n||!l||!g||!a)return function(){};var e=n.addListener("click",(function(e){null===a||void 0===a||a.geocode({location:e.latLng},(function(e,r){if("OK"===r&&e){var o=e[0].geometry.location,a=e[0].formatted_address;o&&a&&(l.setPosition(o),g.setPosition(o),g.setContent(a),n.setCenter(e[0].geometry.location),t((0,M.de)(a)))}else console.error("Geocoding was not successful for the following reason: ".concat(r))}))}));return function(){google&&google.maps&&google.maps.event&&google.maps.event.removeListener(e)}}),[n,g,l,a]),null},R="PlacesAutocompleteService_searchInput__xkf2Z",X="PlacesAutocompleteService_suggestions__mivNq",F=function(){var e=(0,c.useState)(null),r=(0,o.Z)(e,2),t=r[0],n=r[1],a=(0,c.useState)(null),s=(0,o.Z)(a,2),i=s[0],l=s[1],u=(0,Z.I0)(),d=(0,Z.v9)(y.Z.getAddresss),p=(0,c.useRef)(null),g=(0,c.useRef)(null),m=(0,c.useState)([]),v=(0,o.Z)(m,2),h=v[0],x=v[1],_=(0,c.useState)(!1),b=(0,o.Z)(_,2),C=b[0],P=b[1],I=G(),S=function(){var e=(0,c.useContext)(N).googleMapsAPIIsLoaded;return(0,c.useMemo)((function(){if(!e)return null;if(!google.maps.places)throw Error("Places library missing. Add 'places' to the libraries array of GoogleMapsProvider.");return new google.maps.places.AutocompleteService}),[e])}(),A=function(e){var r=(0,c.useContext)(N),t=r.map,n=r.googleMapsAPIIsLoaded,a=(0,c.useState)(null),s=(0,o.Z)(a,2),i=s[0],l=s[1];return(0,c.useEffect)((function(){if(n){if(!google.maps.places)throw Error("Places library missing. Add 'places' to the libraries array of GoogleMapsProvider.");if(void 0!==(null==e?void 0:e.divElement)){if(null!=e&&e.divElement){var r=new google.maps.places.PlacesService(null==e?void 0:e.divElement);l(r)}}else{if(!t)return;var o=new google.maps.places.PlacesService(t);l(o)}}}),[n,t,null==e?void 0:e.divElement]),i}();return(0,c.useEffect)((function(){d.length>=2?null===S||void 0===S||S.getPlacePredictions({input:d},(function(e,r){if(r===google.maps.places.PlacesServiceStatus.OK&&e){var t=e.slice(0,5).map((function(e){return{id:e.place_id,label:e.description}}));x(t)}})):x([])}),[d]),(0,c.useEffect)((function(){if(!I)return function(){};var e=new google.maps.Marker({map:I});n(e);var r=new google.maps.InfoWindow({content:""});return l(r),r.open(I,e),function(){null===r||void 0===r||r.close(),null===e||void 0===e||e.setMap(null)}}),[I]),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(j.Z.Group,{className:R,children:[(0,f.jsx)(j.Z.Label,{htmlFor:"places-search-autocomplete",children:"Address"}),(0,f.jsx)(j.Z.Control,{ref:p,type:"address",name:"address",placeholder:"Enter your address",value:d,onChange:function(e){u((0,M.de)(e.target.value)),g.current&&clearTimeout(g.current),g.current=setTimeout((function(){P(!0)}),300)},id:"places-search-autocomplete",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-controls":"search-suggestions","aria-expanded":C}),C&&(0,f.jsx)("ul",{className:X,id:"search-suggestions",role:"listbox","aria-label":"Suggested locations:",children:h.map((function(e){return(0,f.jsx)("li",{onClick:function(){return function(e){var r;null===(r=p.current)||void 0===r||r.focus(),u((0,M.de)(e.label)),P(!1),null===A||void 0===A||A.getDetails({placeId:e.id},(function(e,r){var o;if(r===google.maps.places.PlacesServiceStatus.OK&&e){var n=null===(o=e.geometry)||void 0===o?void 0:o.location;I&&n&&(I.setZoom(14),I.panTo(n),t.setPosition(n),i.setPosition(n),i.setContent(d))}}))}(e)},id:e.id,role:"option",children:(0,f.jsx)("span",{children:e.label})},e.id)}))})]})})},J=t(8118),K={form:"OrderForm_form__YyQvA",label:"OrderForm_label__hbM5b",button:"OrderForm_button__LKUcv"};function q(){var e=(0,Z.I0)(),r=(0,c.useState)(null),t=(0,o.Z)(r,2),n=t[0],a=t[1],s=(0,c.useState)(53.5582447),i=(0,o.Z)(s,2),l=i[0],u=i[1],d=(0,c.useState)(9.647645),p=(0,o.Z)(d,2),g=p[0],m=p[1],v=(0,c.useCallback)((function(e){e&&a(e)}),[]);(0,c.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){u(e.coords.latitude),m(e.coords.longitude),console.log(e.coords.latitude,e.coords.longitude)}),(function(e){alert(e.message)})):alert("Geolocation is not supported by your browser")}),[]);var h={center:{lat:l,lng:g},zoom:14,disableDefaultUI:!0,zoomControl:!0,zoomControlOptions:{position:3}},x=(0,Z.v9)(y.Z.getName),_=(0,Z.v9)(y.Z.getEmail),b=(0,Z.v9)(y.Z.getPhone),C=(0,Z.v9)(y.Z.getAddOrderErrors),P=(0,Z.v9)(y.Z.getAddedOrder),I=function(r){var t=r.target,o=t.name,n=t.value;switch(o){case"name":return e((0,M.eu)(n));case"email":return e((0,M.Uk)(n));case"phone":return e((0,M.OW)(n));default:return}};return(0,f.jsxs)("div",{children:[(0,f.jsx)(k,{googleMapsAPIKey:"AIzaSyBJj2Hri6OYehvSzAyAgRYR5BxF5JwOHb4",mapContainer:n,mapOptions:h,libraries:["places"],children:(0,f.jsxs)(c.StrictMode,{children:[(0,f.jsx)("div",{ref:v,style:{height:"300px"}}),(0,f.jsx)(T,{initialPosition:{lat:l,lng:g}}),(0,f.jsx)(F,{})]})}),(0,f.jsxs)(j.Z,{className:K.form,children:[(0,f.jsxs)(j.Z.Group,{className:"mb-3",controlId:"name",children:[(0,f.jsx)(j.Z.Label,{children:"Name"}),(0,f.jsx)(j.Z.Control,{type:"text",name:"name",placeholder:"Enter your name",value:x,onChange:I})]}),(0,f.jsxs)(j.Z.Group,{className:"mb-3",controlId:"email",children:[(0,f.jsx)(j.Z.Label,{children:"Email"}),(0,f.jsx)(j.Z.Control,{type:"email",name:"email",placeholder:"Enter your email",value:_,onChange:I})]}),(0,f.jsxs)(j.Z.Group,{className:"mb-3",controlId:"phone",children:[(0,f.jsx)(j.Z.Label,{children:"Phone"}),(0,f.jsx)(j.Z.Control,{type:"tel",name:"phone",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",title:"XXX-XXX-XXXX",placeholder:"Enter your phone",value:b,onChange:I})]})]}),C&&(0,f.jsx)(J.Z,{message:C}),P._id&&(0,f.jsx)("h2",{children:"Thank you for your order. Orders Id is ".concat(P._id)})]})}var z={AreasList:"ShoppingCartPage_AreasList__JsPn8",AreasList__Item:"ShoppingCartPage_AreasList__Item__xhi0P"};function B(){return(0,f.jsx)("div",{children:(0,f.jsxs)("ul",{className:z.AreasList,children:[(0,f.jsx)("li",{className:z.AreasList__Item,children:(0,f.jsx)(q,{})}),(0,f.jsx)("li",{className:z.AreasList__Item,children:(0,f.jsx)(L,{})})]})})}function U(){return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(B,{})})}}}]);
//# sourceMappingURL=ShoppingCartView.61eea7d1.chunk.js.map